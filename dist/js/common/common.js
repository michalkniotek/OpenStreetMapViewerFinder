"use strict";

// Generated by CoffeeScript 1.10.0
/*
  Tworzy funkcję która nie pozwoli uruchomić się częściej niż co {time} ms.
  Jeśli próby będą zbyt częste, tylko ostatnie wołanie zostanie wykonane

  przykład:
  slowFunc = ((a)-> console.log a).slowly(500)

  slowFunc(4)
  slowFunc(5)
  slowFunc(6)
  slowFunc(7)
  slowFunc(8)
  slowFunc(9)
  slowFunc(10)

  efekt: w konsoli zostanie wyświetlona wyłacznie liczba 10
 */

Function.prototype.slowly = function (time, maxStack) {
  var currentStack, delayKeeper, original;
  original = this;
  delayKeeper = null;
  currentStack = 0;
  return function () {
    var callargs, run;
    callargs = arguments;
    currentStack++;
    if (delayKeeper) {
      clearTimeout(delayKeeper);
    }
    run = (function (_this) {
      return function () {
        currentStack = 0;
        delayKeeper = null;
        return original.apply(_this, callargs);
      };
    })(this);
    if (!maxStack || currentStack < maxStack) {
      return delayKeeper = setTimeout(run, time);
    } else {
      return run();
    }
  };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQkEsUUFBUSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsVUFBUyxJQUFJLEVBQUUsUUFBUSxFQUFFO0FBQ25ELE1BQUksWUFBWSxFQUFFLFdBQVcsRUFBRSxRQUFRLENBQUM7QUFDeEMsVUFBUSxHQUFHLElBQUksQ0FBQztBQUNoQixhQUFXLEdBQUcsSUFBSSxDQUFDO0FBQ25CLGNBQVksR0FBRyxDQUFDLENBQUM7QUFDakIsU0FBTyxZQUFXO0FBQ2hCLFFBQUksUUFBUSxFQUFFLEdBQUcsQ0FBQztBQUNsQixZQUFRLEdBQUcsU0FBUyxDQUFDO0FBQ3JCLGdCQUFZLEVBQUUsQ0FBQztBQUNmLFFBQUksV0FBVyxFQUFFO0FBQ2Ysa0JBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQztLQUMzQjtBQUNELE9BQUcsR0FBRyxDQUFDLFVBQVMsS0FBSyxFQUFFO0FBQ3JCLGFBQU8sWUFBVztBQUNoQixvQkFBWSxHQUFHLENBQUMsQ0FBQztBQUNqQixtQkFBVyxHQUFHLElBQUksQ0FBQztBQUNuQixlQUFPLFFBQVEsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO09BQ3hDLENBQUM7S0FDSCxDQUFBLENBQUUsSUFBSSxDQUFDLENBQUM7QUFDVCxRQUFJLENBQUMsUUFBUSxJQUFJLFlBQVksR0FBRyxRQUFRLEVBQUU7QUFDeEMsYUFBTyxXQUFXLEdBQUcsVUFBVSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztLQUM1QyxNQUFNO0FBQ0wsYUFBTyxHQUFHLEVBQUUsQ0FBQztLQUNkO0dBQ0YsQ0FBQztDQUNILENBQUMiLCJmaWxlIjoianMvY29tbW9uL2NvbW1vbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMC4wXG4vKlxuICBUd29yenkgZnVua2NqxJkga3TDs3JhIG5pZSBwb3p3b2xpIHVydWNob21pxIcgc2nEmSBjesSZxZtjaWVqIG5pxbwgY28ge3RpbWV9IG1zLlxuICBKZcWbbGkgcHLDs2J5IGLEmWTEhSB6Ynl0IGN6xJlzdGUsIHR5bGtvIG9zdGF0bmllIHdvxYJhbmllIHpvc3RhbmllIHd5a29uYW5lXG5cbiAgcHJ6eWvFgmFkOlxuICBzbG93RnVuYyA9ICgoYSktPiBjb25zb2xlLmxvZyBhKS5zbG93bHkoNTAwKVxuXG4gIHNsb3dGdW5jKDQpXG4gIHNsb3dGdW5jKDUpXG4gIHNsb3dGdW5jKDYpXG4gIHNsb3dGdW5jKDcpXG4gIHNsb3dGdW5jKDgpXG4gIHNsb3dGdW5jKDkpXG4gIHNsb3dGdW5jKDEwKVxuXG4gIGVmZWt0OiB3IGtvbnNvbGkgem9zdGFuaWUgd3nFm3dpZXRsb25hIHd5xYJhY3puaWUgbGljemJhIDEwXG4gKi9cblxuRnVuY3Rpb24ucHJvdG90eXBlLnNsb3dseSA9IGZ1bmN0aW9uKHRpbWUsIG1heFN0YWNrKSB7XG4gIHZhciBjdXJyZW50U3RhY2ssIGRlbGF5S2VlcGVyLCBvcmlnaW5hbDtcbiAgb3JpZ2luYWwgPSB0aGlzO1xuICBkZWxheUtlZXBlciA9IG51bGw7XG4gIGN1cnJlbnRTdGFjayA9IDA7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2FsbGFyZ3MsIHJ1bjtcbiAgICBjYWxsYXJncyA9IGFyZ3VtZW50cztcbiAgICBjdXJyZW50U3RhY2srKztcbiAgICBpZiAoZGVsYXlLZWVwZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dChkZWxheUtlZXBlcik7XG4gICAgfVxuICAgIHJ1biA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBjdXJyZW50U3RhY2sgPSAwO1xuICAgICAgICBkZWxheUtlZXBlciA9IG51bGw7XG4gICAgICAgIHJldHVybiBvcmlnaW5hbC5hcHBseShfdGhpcywgY2FsbGFyZ3MpO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKTtcbiAgICBpZiAoIW1heFN0YWNrIHx8IGN1cnJlbnRTdGFjayA8IG1heFN0YWNrKSB7XG4gICAgICByZXR1cm4gZGVsYXlLZWVwZXIgPSBzZXRUaW1lb3V0KHJ1biwgdGltZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBydW4oKTtcbiAgICB9XG4gIH07XG59O1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
